<!DOCTYPE html>
<html>

	<head>
		
<title>spring-Quiet</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="shortcut icon" type="image/x-icon" href="/image/favicon.ico">

<meta name="keywords" content="郑东辉的博客网站">
<meta name="description" content="描述">


<script src="/js/jquery.min.js"></script>


	<meta name="generator" content="Hexo 6.1.0"></head>

	<body>
		
<link rel="stylesheet" href="/css/page.css">


<link rel="stylesheet" href="/css/page_cente.css">


<link rel="stylesheet" href="/css/atom-one-dark.css">


<link rel="stylesheet" href="/css/header.css">

	<div class="header">
		<div class="header-top">
			<div class="h-left">
				<a href="/">
					<img src="/image/logo.png" alt="Quiet">
				</a>
			</div>
			<div class="h-right">
				<ul>
					
						
								<li>
									<a href="/">
										HOME
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/archives">
										ARCHIVE
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/categories">
										CATEGORIES
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/tags">
										TAGS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/links">
										LINKS
									</a>
									<span class="dot"></span>
								</li>
								
									
						
								<li>
									<a href="/about">
										ABOUT
									</a>
									<span class="dot"></span>
								</li>
								
									
				</ul>
			</div>
			<div class="h-right-close">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
					<path fill="none" d="M0 0h24v24H0z" />
					<path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" fill="rgba(68,68,68,1)" />
				</svg>
			</div>
		</div>
	</div>
	<div class="sidebar">
    <div class="topo">
        <h2>Ahui</h2>
    </div>
    <ul>
        
        <li>
            <a href="/">HOME</a>
        </li>
        
        <li>
            <a href="/archives">ARCHIVE</a>
        </li>
        
        <li>
            <a href="/categories">CATEGORIES</a>
        </li>
        
        <li>
            <a href="/tags">TAGS</a>
        </li>
        
        <li>
            <a href="/links">LINKS</a>
        </li>
        
        <li>
            <a href="/about">ABOUT</a>
        </li>
        
    </ul>
    <div class="my_foot">
        
        <a target="_blank" rel="noopener" href="https://github.com/qiaobug">
            <img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
        </a>
        
    </div>
</div>
<div class='shelter'
    style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'>
</div>
<style>
    .sidebar {
        width: 0;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        background: #fff;
        z-index: 999;
        text-align: center;
        box-shadow: -6px 0 20px rgba(98, 94, 94, .815)
    }

    .topo {
        width: 100%;
        height: 200px;
        background: url(https://api.ixiaowai.cn/gqapi/gqapi.php) no-repeat;
        background-size: 100% 100%;
        position: relative;
        display: flex;
        align-items: flex-end
    }

    .topo h2 {
        color: #fff;
        z-index: 1;
        position: relative;
        margin: 0 0 10px 10px;
        font-size: 1.2em;
        box-sizing: border-box
    }

    .topo:before {
        content: '';
        background-image: url(/image/pattern.png);
        background-repeat: repeat;
        height: 100%;
        left: 0;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: 1
    }

    .sidebar ul {
        width: 100%;
        margin-top: 50px
    }

    .sidebar ul li {
        height: 50px;
        list-style: none;
        font-size: 1.2em;
        text-align: right;
        margin-right: 10px
    }

    .sidebar ul li a {
        display: grid;
        color: #5d606a;
        text-overflow: ellipsis;
        width: 100%;
        text-decoration: none
    }

    .my_foot {
        width: 100%;
        padding: 10px;
        margin-bottom: 10px;
        position: absolute;
        bottom: 0
    }

    .my_foot a {
        text-decoration: none;
        margin-right: 10px;
        display: inline-block
    }

    .my_foot a img {
        width: 30px;
        height: 30px
    }
</style>

<script>
    $(function () { $('.h-right-close>svg').click(function () { $('.sidebar').animate({ width: "66%" }, 500); $('.shelter').fadeIn("slow") }); $('.shelter').click(function (e) { $('.sidebar').animate({ width: "0" }, 500); $('.shelter').fadeOut("slow") }) })
</script>
		<script>
			$(function () { $(window).scroll(function () { if ($(document).scrollTop() > 100) { $(".header-top").removeClass("header-move2"); $('.header-top').addClass('header-move1') } else { $(".header-top").removeClass("header-move1"); $('.header-top').addClass('header-move2') } }) });
		</script>
<div class="header-bg ">
    <div class="bg-content">
        <ul class="tag">
            
        </ul>
        <h1>spring</h1>
        <div class="article-info">
            <div class="article-author">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                    <g>
                        <path fill="#12183A"
                            d="M6.187 15.265A6.47 6.47 0 0 0 10 16.5a6.47 6.47 0 0 0 3.813-1.235A4.99 4.99 0 0 0 10 13.5a4.99 4.99 0 0 0-3.813 1.765zM5.082 14.25A6.485 6.485 0 0 1 10 12c1.965 0 3.726.872 4.918 2.25a6.5 6.5 0 1 0-9.836 0zM10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm0-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z">
                        </path>
                    </g>
                </svg>
                
                <span> <a href="">Ahui</a></span>
                <p>2022-05-04 22:03:19</p>
            </div>
        </div>
    </div>
</div>
<div class="article-content">
    <div id="article" class="content">
        <ol>
<li><p>springIOC</p>
<ul>
<li><p><img src="C:\Users\19651\AppData\Roaming\Typora\typora-user-images\image-20220103164542950.png" alt="image-20220103164542950"></p>
</li>
<li><p>&#96;&#96;&#96;java<br>ApplicationContext application&#x3D;new ClassPathXmlApplicationContext(“applicationContext.xml”);<br>SpringS prin &#x3D; application.getBean(“prin”, SpringS.class);<br>prin.prin();</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. 核心容器的两个接口引发出的问题</span><br><span class="line"></span><br><span class="line">   1. ApplicationContext</span><br><span class="line"></span><br><span class="line">      他在构建核心容器时，创建对象采取的策略是采用立即加载的方式。也就是说，只要一读取完配置文件马上就创建配置文件中配置的对象</span><br><span class="line"></span><br><span class="line">      ```java</span><br><span class="line">      //单例模式适用</span><br><span class="line">      ApplicationContext application=new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);//直接把配置文件里的所有bean全部创建</span><br><span class="line">      SpringS prin = application.getBean(&quot;prin&quot;, SpringS.class);</span><br><span class="line">      prin.prin();</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li><p>BeanFactory</p>
<p>他在构建核心容器时，创建对象采取的策略是采用延迟加载的方式。也就是说，什么时候根据id获取对象了，什么时候才真正的创建对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//多例模式适用</span></span><br><span class="line">Resource resource=<span class="keyword">new</span> <span class="title class_">ClassPathResource</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);<span class="comment">//仅在使用时创建对象</span></span><br><span class="line">BeanFactory beanFactory=<span class="keyword">new</span> <span class="title class_">XmlBeanFactory</span>(resource);</span><br><span class="line"><span class="type">SpringS</span> <span class="variable">prin</span> <span class="operator">=</span> beanFactory.getBean(<span class="string">&quot;prin&quot;</span>, SpringS.class);</span><br><span class="line">prin.prin();</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p>spring创建对象的三种方式</p>
<ul>
<li><p>一、使用默认构造函数创建，在spring的配置文件中使用bean标签，配以id和class属性之后，且没有其他属性和标签时，采用的是默认构造函数创建bean对象，如果类中没有默认构造函数，则对象无法创建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    采用默认构造函数创建对象--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;prin&quot;</span> class=<span class="string">&quot;com.springTest.SpringS&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>二、使用普通工厂中的方法创建对象(使用某个类中的方法创建对象并存入spring容器)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    采用某个类中的方法创建对象--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;prinsk&quot;</span> class=<span class="string">&quot;com.springTest.SpringS&quot;</span>&gt;&lt;/bean&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;sec&quot;</span> factory-bean=<span class="string">&quot;prinsk&quot;</span> factory-method=<span class="string">&quot;retu&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>三、使用工厂中的静态方法创建对象(使用某个类中的静态方法创建对象，并存入spring容器)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--    使用某个类中的静态方法创建对象，并存入spring容器--&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;sk&quot;</span> class=<span class="string">&quot;com.springTest.SpringS&quot;</span> factory-method=<span class="string">&quot;retu&quot;</span>&gt;&lt;/bean&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><img src="C:\Users\19651\AppData\Roaming\Typora\typora-user-images\image-20220103193515488.png" alt="image-20220103193515488"></p>
</li>
<li><p>bean的作用范围调整</p>
<p>bean标签的scope属性</p>
<p>​		作用：用于指定bean的作用范围</p>
<p>​		取值：常用的就是单例和多例的</p>
<p>​				singleton:单例的(默认值)</p>
<p>​				prototype:多例的</p>
<p>​				request:作用于web应用的请求范围</p>
<p>​				session:作用于web应用的会话范围</p>
<p>​				global-session:作用于集群环境的会话范围(全局会话范围)，当不是集群时，它就是session</p>
</li>
<li><p>注入</p>
<ol>
<li><p>构造函数注入：</p>
<p>涉及的标签：constructor-arg</p>
<p>标签出现的位置：bean标签的内部</p>
<p>标签中的属性</p>
<p>​	type：用于指定要注入的数据的数据类型，该数据类型也是构造函数中某个或某些参数的类型</p>
<p>​	index：用于指定要注入的数据给构造函数中指定索引位置的参数赋值。索引的位置是从0开始</p>
<p>​	name：用于指定给构造函数中指定名称的参数赋值</p>
<hr>
<p>​	value</p>
<p>​	ref</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;prin&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springTest.SpringS&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;aaa&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;111&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>set注入:</p>
<p>涉及的标签：property</p>
<p>标签出现的位置：bean标签的内部</p>
<p>标签中的属性</p>
<p>​	name：用于指定注入时所调用的set<strong>方法名称</strong></p>
<p>​	value：用于提供基本类型和String类型的数据</p>
<p>​	ref：用于指定其他的bean类型数据。他指的就是在spring的Ioc核心容器中出现过的bean对象</p>
<p>优势：创建对象时没有明确的限制，可以直接使用默认构造函数</p>
<p>弊端：如果有某个成员必须有值，则获取对象是有可能set方法没有执行</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;prin&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springTest.SpringS&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;aaa&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;222&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<p>​			3.复杂类型的注入\集合类型注入</p>
<p>​				用于给List结构注入的标签：</p>
<p>​						list array set</p>
<p>​				用于给Map结构集合注入的标签：</p>
<p>​						map props</p>
<p>​				结构相同，标签可以互换</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;coll&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.springTest.SpringS&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>aaa<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>bbb<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>ccc<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;set&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>kkk<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>ppp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;strings&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>qqq<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>www<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;sss&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ooo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;rrr&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>hhh<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;properties&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;lll&quot;</span>&gt;</span>pppppp<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="7">
<li><p>spring注解开发</p>
<ul>
<li><p>用于创建对象的</p>
<p><em>他们的作用就和在XML配置文件中编写一个<bean>标签实现的功能是一样的</em></p>
<p>Component:</p>
<p>​					作用：用于把当前类对象存入spring容器中</p>
<p>​					属性：value：用于指定bean的id当我们不写时，他的默认值是当前类名，且首字母改小写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringS</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">       xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">       xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">       xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">        https://www.springframework.org/schema/beans/spring-beans.xsd </span></span><br><span class="line"><span class="string">        http://www.springframework.org/schema/context </span></span><br><span class="line"><span class="string">        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span><br><span class="line">&lt;!--    spring组件扫描--&gt;</span><br><span class="line">    &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.springTest&quot;</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<p>Controller：一般用在表现层</p>
<p>Service：一般用在业务层</p>
<p>Repository：一般用在持久层</p>
<p>以上三个注解他们的作用和属性与Component是一模一样。</p>
<p>他们三个是spring框架为我们提供明确的三层使用的注解，使我们三层对象更加清晰</p>
</li>
<li><p>用于注入数据的</p>
<p>他们的作用就和在xml配置文件中的bean标签中写一个<property>标签的作用是一样的</p>
<p>Autowired：</p>
<p>​				作用：自动按照类型注入。只要容器中有<strong>唯一</strong>的一个bean对象类型和要注入的变量类型匹配，就可以注入成功</p>
<p>​							如果Ioc容器中没有任何bean的类型和要注入的变量类型匹配，则报错</p>
<p>​							如果Ioc容器中有多个类型匹配时，则根据变量名匹配Map中的key，一样则注入成功，不一样则报错</p>
<p><img src="C:\Users\19651\AppData\Roaming\Typora\typora-user-images\image-20220104141715692.png" alt="image-20220104141715692"></p>
<p>出现位置：可以是变量上，也可以是方法上</p>
<p>细节：在使用注解注入式，set方法就不是必须的了。</p>
<p>Qualifier：作用：再按照类中注入的基础之上再按照名称注入。他在给类成员注入时不能单独使用，但是在给方法参数注入时可以</p>
<p>​					属性：value：用于指定注入bean的id</p>
<p>Resource：直接按照bean的id注入，它可以独立使用</p>
<p>​					属性：name：用于指定bean的id。</p>
<p>以上三个注入都只能注入其他bean类型的数据，而基本类型和String类型无法使用上述注解实现。另外，集合类型的注入只能通过xml来实现</p>
<p>Value：</p>
<p>​					作用：用于注入基本类型和String类型的数据</p>
<p>​					属性：value用于指定数据的值。它可以使用spring中的SpEL(也就是spring的el表达式) SpEL的写法。${表达式}</p>
<p>用于改变作用范围的：</p>
<p>​					他们的作用就和在bean标签中使用scope属性实现的功能是一样的</p>
<p>​					Scope(作用域是一级一级往上查的，套娃)：作用：用于指定bean的作用范围</p>
<p>​					属性：value：指定范围的取值。常用取值：singleton  prototype		</p>
<p>和生命周期相关 了解</p>
<p>​						他们的作用就和在bean标签中使用init-method和destroy-method的作用是一样的</p>
<p>​						PreDestroy：作用：用于指定销毁方法</p>
<p>​						PostConstruce：作用：用于指定初始化方法	</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;singleton&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringS</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//初始化方法 在创建完对象之后调用</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;用户调用初始化方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//销毁方法 只在单例模式下有用</span></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;用户调用销毁方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​		</p>
</li>
<li><p>spring新注解</p>
<p>该类是一个配置类，它的作用和bean.xml是一样的</p>
<p>spring中的新注解</p>
<p>Configuration</p>
<p>​					作用：指定当前类是一个配置类</p>
<p>​					细节：当配置类作为AnnotationConfigApplicationContext对象创建的参数时，该注解可不写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br></pre></td><td class="code"><pre><span class="line">     <span class="type">ApplicationContext</span> <span class="variable">annotationConfigApplicationContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringS.class);</span><br><span class="line"></span><br><span class="line">​			<span class="meta">@ComponentScan(&quot;com.springTest&quot;)</span></span><br><span class="line"></span><br><span class="line">​									作用：用于通过注解指定spring在创建容器时要扫描的包</span><br><span class="line"></span><br><span class="line">​									属性：value：它和basePackages的作用是一样的都是用于指定创建容器时要扫描的包，使用此注解就等于在xml中配置了：</span><br><span class="line"></span><br><span class="line">```xml</span><br><span class="line">&lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.springTest&quot;</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">​				Bean</span><br><span class="line"></span><br><span class="line">​						作用：用于把当前方法的返回值作为bean对象存入spring的ioc容器中</span><br><span class="line"></span><br><span class="line">​						属性：name：用于指定bean的id。当不写时，默认值是当前方法的名称</span><br><span class="line"></span><br><span class="line">​						细节：当我们使用注解配置方法时，如果方法有参数，spring框架会去容器中查找有没有可用的bean对象。查找的方式和Autowired注解的作用是一样的</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line"><span class="meta">@Bean(&quot;name&quot;)</span></span><br><span class="line"><span class="keyword">public</span> SpringS <span class="title function_">getSpr</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpringS</span>();</span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">​				Import</span><br><span class="line"></span><br><span class="line">​							用于导入其他的配置类</span><br><span class="line"></span><br><span class="line">​				<span class="meta">@PropertySource</span></span><br><span class="line"></span><br><span class="line">​							作用：用于指定properties文件的位置</span><br><span class="line"></span><br><span class="line">​							属性：value：指定文件的名称和路径。</span><br><span class="line"></span><br><span class="line">​										关键字：classpath：表示类路径下</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span> spring整合junit</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> 应用程序的入口</span><br><span class="line"></span><br><span class="line">      main方法</span><br><span class="line"></span><br><span class="line">   <span class="number">2.</span> junit单元测试中，没有main方法也能执行</span><br><span class="line"></span><br><span class="line">      junit集成了一个main方法</span><br><span class="line"></span><br><span class="line">      该方法就会判断当前测试类中哪些方法有<span class="meta">@Test</span>注解</span><br><span class="line"></span><br><span class="line">      junit就让有Test注解的方法执行</span><br><span class="line"></span><br><span class="line">   <span class="number">3.</span> junit不会管我们是否采用spring框架</span><br><span class="line"></span><br><span class="line">      ​	在执行测试方法时，junit根本不知到我们是不是使用了spring框架所以也就不会为我们读取配置文件/配置类创建spring核心容器</span><br><span class="line"></span><br><span class="line">   <span class="number">4.</span> 由以上三点可知，当测试方法执行时，没有Ioc容器，就算写了Autowired注解，也无法实现注入</span><br><span class="line"></span><br><span class="line">      --------------------------------------</span><br><span class="line"></span><br><span class="line">   <span class="number">5.</span> 使用junit单元测试，测试spring的配置</span><br><span class="line"></span><br><span class="line">      spring整合junit的配置</span><br><span class="line"></span><br><span class="line">      <span class="number">1.</span> 导入spring整合junit的jar(坐标spring-test)</span><br><span class="line"></span><br><span class="line">      <span class="number">2.</span> 使用junit提供的一个注解把原有的main方法替换了，替换成spring提供的<span class="meta">@Runwith</span></span><br><span class="line"></span><br><span class="line">      <span class="number">3.</span> 告知spring的运行器，spring和ioc创建是基于xml还是注解的，并且说明位置</span><br><span class="line"></span><br><span class="line">         <span class="meta">@ContextConfiguration</span></span><br><span class="line"></span><br><span class="line">         ​		locations：指定xml文件的位置，加上classpath关键字，表示在类路径下</span><br><span class="line"></span><br><span class="line">         ​		classes：指定注解类所在的位置</span><br><span class="line"></span><br><span class="line">      <span class="number">4.</span> 当使用spring5.x版本的时候，要求junit的jar必须是<span class="number">4.12</span>及以上</span><br><span class="line"></span><br><span class="line">         ```java</span><br><span class="line">         <span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line">         <span class="meta">@ContextConfiguration(classes = beans.class)</span><span class="comment">//@ContextConfiguration(locations =&quot;classpath:applicationContext.xml&quot;)</span></span><br><span class="line">         <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppTest</span></span><br><span class="line">         &#123;</span><br><span class="line">             <span class="meta">@Autowired</span></span><br><span class="line">             <span class="meta">@Qualifier(&quot;sk&quot;)</span></span><br><span class="line">             <span class="keyword">private</span> SpringS springS=<span class="literal">null</span>;</span><br><span class="line">         </span><br><span class="line">             <span class="meta">@Test</span></span><br><span class="line">             <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shouldAnswerWithTrue</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">         <span class="comment">//        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span></span><br><span class="line">         <span class="comment">//        SpringS springS = (SpringS) applicationContext.getBean(&quot;springS&quot;);</span></span><br><span class="line">         <span class="comment">//        ApplicationContext bean = new AnnotationConfigApplicationContext(beans.class);</span></span><br><span class="line">         <span class="comment">//        SpringS springS = bean.getBean(&quot;sk&quot;, SpringS.class);</span></span><br><span class="line">                 System.out.println(springS.sk.getUsername());</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         ```</span><br><span class="line"></span><br><span class="line">   <span class="number">6.</span> </span><br><span class="line"></span><br><span class="line"><span class="number">8.</span> ThreadLocal</span><br><span class="line"></span><br><span class="line">   ThreadLocal是解决线程安全问题一个很好的思路，它通过为每个线程提供一个独立的变量副本解决了变量并发访问的冲突问题。在很多情况下，ThreadLocal比直接使用<span class="keyword">synchronized</span>同步机制解决线程安全问题更简单，更方便，且结果程序拥有更高的并发性。</span><br><span class="line"></span><br><span class="line"><span class="number">9.</span> 动态代理</span><br><span class="line"></span><br><span class="line">   <span class="number">1.</span> JDK动态代理</span><br><span class="line"></span><br><span class="line">      ```Java</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">      </span><br><span class="line">          <span class="keyword">private</span> Object object;</span><br><span class="line">      </span><br><span class="line">          <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setObject</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">              <span class="built_in">this</span>.object = object;</span><br><span class="line">          &#125;</span><br><span class="line">      </span><br><span class="line">          <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">(Object object)</span>&#123;</span><br><span class="line">              <span class="built_in">this</span>.object=object;</span><br><span class="line">              <span class="keyword">return</span> Proxy.newProxyInstance(JDKProxy.class.getClassLoader(),object.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;前置增强&quot;</span>);</span><br><span class="line">              Object objects=method.invoke(object,args);</span><br><span class="line">              System.out.println(<span class="string">&quot;后置增强&quot;</span>);</span><br><span class="line">              <span class="keyword">return</span> objects;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      ```</span><br><span class="line"></span><br><span class="line">   <span class="number">2.</span> CGLIB动态代理</span><br><span class="line"></span><br><span class="line">      ```java</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CGLIBProxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line">      </span><br><span class="line">          <span class="keyword">public</span> Object <span class="title function_">getPro</span><span class="params">(Object object)</span>&#123;</span><br><span class="line">              Enhancer enhancer=<span class="keyword">new</span> <span class="title class_">Enhancer</span>();</span><br><span class="line">              enhancer.setSuperclass(object.getClass());</span><br><span class="line">              enhancer.setCallback(<span class="built_in">this</span>);</span><br><span class="line">              <span class="keyword">return</span> enhancer.create();</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">              System.out.println(<span class="string">&quot;前置增强&quot;</span>);</span><br><span class="line">              Object o1=methodProxy.invokeSuper(o,objects);</span><br><span class="line">              System.out.println(<span class="string">&quot;后置增强&quot;</span>);</span><br><span class="line">              <span class="keyword">return</span> o1;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      ```</span><br><span class="line"></span><br><span class="line"><span class="number">10.</span> springAop专业术语</span><br><span class="line"></span><br><span class="line">    连接点(Joinpoint)：被代理类的所有接口方法</span><br><span class="line"></span><br><span class="line">    切点(Pointcut)：被代理类增强的接口方法</span><br><span class="line"></span><br><span class="line">    通知(Advice)：切点增强的一些功能  添加日志、管理事务</span><br><span class="line"></span><br><span class="line">    目标对象(Target)：需要对他进行通知的业务类</span><br><span class="line"></span><br><span class="line">    织入：将通知添加到目标类具体连接点上的过程</span><br><span class="line"></span><br><span class="line">    代理：一个类被Aop织入后生成一个结果类，他是融合了原类和通知逻辑的代理类</span><br><span class="line"></span><br><span class="line">    切面：切面由切点和通知组成</span><br><span class="line"></span><br><span class="line"><span class="number">11.</span> spring切入点写法</span><br><span class="line"></span><br><span class="line">    标准写法：<span class="keyword">public</span> <span class="keyword">void</span> com.springTest.SpringAopTest.test(<span class="type">int</span>,<span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">    访问修饰符可以省略：<span class="keyword">void</span> com.springTest.SpringAopTest.test(<span class="type">int</span>,<span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">    返回值可以使用通配符，表示任意返回值：* com.springTest.SpringAopTest.test(<span class="type">int</span>,<span class="type">int</span>)</span><br><span class="line"></span><br><span class="line">    包名可以使用通配符，表示任意包，但是有几级包，就需要写几个*： * * . * . * .Account(..)</span><br><span class="line"></span><br><span class="line">    包名可以使用..表示当前包及子包(中间可以有一个或多个子包)：* * .. Account(..)</span><br><span class="line"></span><br><span class="line">    全通配写法：* *..*.*(..)</span><br><span class="line"></span><br><span class="line">    实际开发中切点的常用写法：* com.Aop.impl.* . *(..)</span><br><span class="line"></span><br><span class="line"><span class="number">12.</span> spring通知</span><br><span class="line"></span><br><span class="line">    ```xml</span><br><span class="line">    &lt;!--    springAOP配置--&gt;</span><br><span class="line">        &lt;aop:config&gt;</span><br><span class="line">            &lt;aop:pointcut id=<span class="string">&quot;pot1&quot;</span> expression=<span class="string">&quot;execution(public * com.springTest.SpringAopTest.*())&quot;</span>/&gt;</span><br><span class="line">    &lt;!--        配置切面--&gt;</span><br><span class="line">            &lt;aop:aspect id=<span class="string">&quot;aspect1&quot;</span> ref=<span class="string">&quot;springAops&quot;</span>&gt;</span><br><span class="line">    &lt;!--            前置通知--&gt;</span><br><span class="line">                &lt;aop:before method=<span class="string">&quot;show&quot;</span> pointcut-ref=<span class="string">&quot;pot1&quot;</span>&gt;&lt;/aop:before&gt;</span><br><span class="line">    &lt;!--            后置通知--&gt;</span><br><span class="line">                &lt;aop:after-returning method=<span class="string">&quot;retu&quot;</span> pointcut-ref=<span class="string">&quot;pot1&quot;</span>&gt;&lt;/aop:after-returning&gt;</span><br><span class="line">    &lt;!--            异常通知--&gt;</span><br><span class="line">                &lt;aop:after-throwing method=<span class="string">&quot;throwk&quot;</span> pointcut-ref=<span class="string">&quot;pot1&quot;</span>&gt;&lt;/aop:after-throwing&gt;</span><br><span class="line">    &lt;!--            最终通知--&gt;</span><br><span class="line">                &lt;aop:after method=<span class="string">&quot;after&quot;</span> pointcut-ref=<span class="string">&quot;pot1&quot;</span>&gt;&lt;/aop:after&gt;</span><br><span class="line">    &lt;!--            环绕通知  增强方法中要有ProceedingJoinpoint--&gt;</span><br><span class="line">                &lt;aop:around method=<span class="string">&quot;show&quot;</span> pointcut-ref=<span class="string">&quot;pot1&quot;</span>&gt;&lt;/aop:around&gt;</span><br><span class="line">            &lt;/aop:aspect&gt;</span><br><span class="line">        &lt;/aop:config&gt;</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line"><span class="number">13.</span> springAop注解实现</span><br><span class="line"></span><br><span class="line">    ```Java</span><br><span class="line">    <span class="keyword">package</span> com.springTest;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">    <span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line">    <span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Component(&quot;springAops&quot;)</span></span><br><span class="line">    <span class="meta">@Aspect</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringAops</span> &#123;</span><br><span class="line">    <span class="comment">//    springAop环绕通知</span></span><br><span class="line">        <span class="meta">@Pointcut(&quot;execution(public * com.springTest.SpringAopTest.*())&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pot1</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">        <span class="meta">@Around(&quot;pot1()&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> Object <span class="title function_">show</span><span class="params">(ProceedingJoinPoint poj)</span>&#123;</span><br><span class="line">            Object ob=<span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;前置通知&quot;</span>);</span><br><span class="line">                ob=poj.proceed();</span><br><span class="line">                System.out.println(<span class="string">&quot;后置通知&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> ob;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                System.out.println(<span class="string">&quot;异常通知&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;最终通知&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ob;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@AfterReturning(&quot;pot1()&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;后置通知&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@AfterThrowing(&quot;pot1()&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">throwk</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;异常通知&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">@After(&quot;pot1()&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">retu</span><span class="params">()</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;最终通知&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">    ```xml</span><br><span class="line">    &lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">    &lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">           xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">           xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">           xmlns:aop=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="line">           xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span><br><span class="line"><span class="string">            https://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/context</span></span><br><span class="line"><span class="string">            https://www.springframework.org/schema/context/spring-context.xsd</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/aop</span></span><br><span class="line"><span class="string">            https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span><br><span class="line">    &lt;!--    spring组件扫描--&gt;</span><br><span class="line">        &lt;context:component-scan base-<span class="keyword">package</span>=<span class="string">&quot;com.springTest&quot;</span>&gt;&lt;/context:component-scan&gt;</span><br><span class="line">    &lt;!--    开启AOP注解--&gt;</span><br><span class="line">        &lt;aop:aspectj-autoproxy/&gt;</span><br><span class="line">    &lt;/beans&gt;</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line"><span class="number">14.</span> Spring事务管理</span><br><span class="line"></span><br><span class="line">    ```java</span><br><span class="line">    &lt;!--    配置事务管理--&gt;</span><br><span class="line">        &lt;bean class=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span> id=<span class="string">&quot;dataSourceTransactionManager&quot;</span>&gt;</span><br><span class="line">            &lt;!-- 向事务中注入源数据 --&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">        &lt;/bean&gt;</span><br><span class="line">            &lt;!-- 配置事务的通知 --&gt;</span><br><span class="line">        &lt;tx:advice id=<span class="string">&quot;transactionInterceptor&quot;</span> transaction-manager=<span class="string">&quot;dataSourceTransactionManager&quot;</span>&gt;</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">            *isolation:用于指定事务的隔离级别。默认值是DEFAULT，表示使用数据库的默认隔离级别</span></span><br><span class="line"><span class="comment">            *propagation:用于指定事务的传播行为。默认值是REQUIRED，表示一定会有事务，增删改的选择。默认方法可以选择SUPPORES</span></span><br><span class="line"><span class="comment">            *read-only:用于指定事务是否只读。只有查询方法才能设置为true，默认是false表示读写</span></span><br><span class="line"><span class="comment">            *timeout：用于指定事务的超时时间，默认值是-1，表示永不超时。如果指定了数值，以秒为单位。</span></span><br><span class="line"><span class="comment">            *rollback-for:用于指定一个异常，当产生该异常时，事务回滚，产生其他异常时事务不回滚，没有默认值，表示任何异常都回滚。</span></span><br><span class="line"><span class="comment">            *no-rollback-for：用于指定一个异常，当产生该异常时，事务不回滚，产生其他异常时，事务回滚，没有默认值，表示任何异常都回滚</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            &lt;tx:attributes&gt;</span><br><span class="line">                &lt;tx:method name=<span class="string">&quot;*&quot;</span> propagation=<span class="string">&quot;REQUIRED&quot;</span> read-only=<span class="string">&quot;false&quot;</span>/&gt;</span><br><span class="line">                &lt;tx:method name=<span class="string">&quot;find*&quot;</span> propagation=<span class="string">&quot;SUPPORTS&quot;</span> read-only=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">            &lt;/tx:attributes&gt;</span><br><span class="line">        &lt;/tx:advice&gt;</span><br><span class="line">        &lt;!--配置事务的切面--&gt;</span><br><span class="line">        &lt;aop:config&gt;</span><br><span class="line">            &lt;!--设置pointcut 表达式，并且把定义好的事务属性应用到切入点--&gt;</span><br><span class="line">            &lt;aop:pointcut id=<span class="string">&quot;pot1&quot;</span> expression=<span class="string">&quot;execution(* com.SpringTransaction.service.impl.*.*(..))&quot;</span>/&gt;</span><br><span class="line">            &lt;aop:advisor advice-ref=<span class="string">&quot;transactionInterceptor&quot;</span> pointcut-ref=<span class="string">&quot;pot1&quot;</span>&gt;&lt;/aop:advisor&gt;</span><br><span class="line">        &lt;/aop:config&gt;</span><br><span class="line">    &lt;!--    proxy-target-class=<span class="string">&quot;true&quot;</span>设置为<span class="literal">true</span>则表示为cglib--&gt;</span><br><span class="line">    &lt;!--    proxy-target-class=<span class="string">&quot;false&quot;</span>则为jdk动态代理--&gt;</span><br><span class="line">        &lt;aop:aspectj-autoproxy  proxy-target-class=<span class="string">&quot;true&quot;</span>/&gt;</span><br><span class="line">    ```</span><br><span class="line"></span><br><span class="line">    spring事务管理注解方式实现</span><br><span class="line"></span><br><span class="line">    ~~~xml</span><br><span class="line">    &lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">    &lt;beans xmlns=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">            xmlns:xsi=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">            xmlns:aop=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span>       </span><br><span class="line">            xmlns:tx=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span> </span><br><span class="line">            xmlns:context=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">            xsi:schemaLocation=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd</span></span><br><span class="line"><span class="string">            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt; </span><br><span class="line">    &lt;!-- 配置数据源 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;dataSource&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span><br><span class="line">      &lt;property name=<span class="string">&quot;driverClassName&quot;</span> value=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">      &lt;property name=<span class="string">&quot;url&quot;</span> value=<span class="string">&quot;jdbc:mysql:///spring_demo&quot;</span>/&gt;</span><br><span class="line">      &lt;property name=<span class="string">&quot;username&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;</span><br><span class="line">      &lt;property name=<span class="string">&quot;password&quot;</span> value=<span class="string">&quot;root&quot;</span>/&gt;  </span><br><span class="line">    &lt;/bean&gt;  </span><br><span class="line">    &lt;!-- 配置JdbcTemplate --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;jdbcTemplate&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.core.JdbcTemplate&quot;</span>&gt;</span><br><span class="line">    		&lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span> /&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 配置事务管理器 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;transactionManager&quot;</span> class=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span><br><span class="line">    	&lt;property name=<span class="string">&quot;dataSource&quot;</span> ref=<span class="string">&quot;dataSource&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;!-- 开启事务注解 --&gt;</span><br><span class="line">    &lt;tx:annotation-driven transaction-manager=<span class="string">&quot;transactionManager&quot;</span>/&gt;</span><br><span class="line">    &lt;!-- 配置实体类 --&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;accountBiz&quot;</span> class=<span class="string">&quot;com.tx.AccountBiz&quot;</span>&gt;</span><br><span class="line">    	&lt;property name=<span class="string">&quot;accountDao&quot;</span> ref=<span class="string">&quot;accountDao&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;bean id=<span class="string">&quot;accountDao&quot;</span> class=<span class="string">&quot;com.tx.AccountDao&quot;</span>&gt;</span><br><span class="line">    	&lt;property name=<span class="string">&quot;jdbcTemplate&quot;</span> ref=<span class="string">&quot;jdbcTemplate&quot;</span>&gt;&lt;/property&gt;</span><br><span class="line">    &lt;/bean&gt;</span><br><span class="line">    &lt;/beans&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.tx;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="comment">//使用@Transactional注解实现事务管理</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountDao</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> JdbcTemplate jdbcTemplate;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setJdbcTemplate</span><span class="params">(JdbcTemplate jdbcTemplate)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.jdbcTemplate = jdbcTemplate;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//银行转账</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">()</span>&#123;</span><br><span class="line">		add();</span><br><span class="line">		<span class="type">int</span> i=<span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">		reduce();		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//增加余额</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">		String sql=<span class="string">&quot;update account set balance=balance+? where accountNo=?&quot;</span>;</span><br><span class="line">		jdbcTemplate.update(sql, <span class="number">500</span>,<span class="number">655925</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//减少余额</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">reduce</span><span class="params">()</span>&#123;</span><br><span class="line">		String sql=<span class="string">&quot;update account set balance=balance-? where accountNo=?&quot;</span>;</span><br><span class="line">		jdbcTemplate.update(sql, <span class="number">500</span>,<span class="number">358788</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li></li>
</ol>

    </div>
</div>
<style>
    #noneimg img {
        display: none;
        z-index: 109;
        width: 600px !important;
        border-radius: 0px;
        position: fixed;
        box-shadow: 0 0 0px #c3c3c300 !important;
        left: 0;
        top: 0;
        right: 0;
        bottom: 0;
        margin: auto !important;
    }

    @media screen and (max-width:600px) {
        #noneimg img {
            width: 88%
        }
    }
</style>
<script>
    $(function () { $('#article').click(function (e) { if (e.target.tagName == "IMG") { if ($('#nonediv').length == 0) { let MImg = `<div id='noneimg'><img src='${e.target.currentSrc}'></div>`; let MDiv = "<div id='nonediv' style='cursor: pointer;display: none; position: fixed;left: 0;top: 0; right: 0;bottom: 0;background-color: #333;opacity:0.5;z-index: 108;'></div>"; $('#article').append(MDiv); $('#article').append(MImg); $("#nonediv").fadeIn("slow"); $("#noneimg img").fadeIn("slow") } } else { if ($('#nonediv').length !== 0) { $("#noneimg ").fadeOut("slow"); $("#nonediv").fadeOut("slow"); setTimeout(function () { $('#nonediv').remove(); $('#noneimg').remove() }, 500) } } }); $('.article-content').addClass('content-move') });
</script>
<div class="Last-Next">
    
    <a href="/2022/05/04/springMvc/">
        <div class="last">
            <span>上一篇</span>
            <p>springmvc</p>
        </div>
    </a>
    

    
    <a href="/2022/05/04/%E5%88%9D%E5%AD%A6springboot/">
        <div class="next">
            <span>下一篇</span>
            <p>初学springboot</p>
        </div>
    </a>
    
</div>
		
<link rel="stylesheet" href="/css/food.css">

<div class="footer">
	<div class="Copyright">
		©2022 By Ahui. 主题：<a
			style="text-decoration: none;display: contents; color: #898F9F;"
			target="_blank" rel="noopener" href="https://github.com/qiaobug/hexo-theme-quiet">Quiet</a>
	</div>
	<div class="contact">
		
		<a target="_blank" rel="noopener" href="https://github.com/qiaobug">
			<img src="https://cdn.jsdelivr.net/gh/duogongneng/MyBlogImg/imggithub.png" alt="Quiet主题">
		</a>
		
	</div>
</div>

<script src="/js/jquery.min.js"></script>


<script src="/js/gotop.js"></script>


<style type="text/css">
    @media screen and (min-width: 600px) {
        .goTop>span {
            display: block;
            border-radius: 50%;
            width: 66px;
            height: 66px;
            cursor: pointer;
            opacity: 0.8;
            background: rgba(18, 24, 58, 0.06);
            text-align: center;
            border: 1px solid rgba(18, 24, 58, 0.06);

            transition: border .5s;
            -moz-transition: border .5s;
            /* Firefox 4 */
            -webkit-transition: border .5s;
            /* Safari 和 Chrome */
            -o-transition: border .5s;
            /* Opera */
        }

        .goTop>span:hover {
            border: 1px solid #6680B3;
        }


        .goTop {
            position: fixed;
            right: 30px;
            bottom: 80px;
        }

        .goTop>span>svg {
            width: 30px;
            height: 30px;
            margin-top: 17.5px;
            opacity: 0.7;
        }

    }

    @media screen and (max-width: 600px) {
        .goTop {
            display: none;
        }
    }
</style>
<div class="goTop" id="js-go_top">
    <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <g>
                <path d="M13 12v8h-2v-8H4l8-8 8 8z"></path>
            </g>
        </svg>
    </span>
</div>
<script>
    $('#js-go_top').gotoTop({ offset: 500, speed: 300, animationShow: { 'transform': 'translate(0,0)', 'transition': 'transform .5s ease-in-out' }, animationHide: { 'transform': 'translate(100px,0)', 'transition': 'transform .5s ease-in-out' } });
</script>
<script>
	console.log('\n %c Hexo-Quiet 主题 %c https://github.com/QiaoBug/hexo-theme-quiet \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;')
</script>
	</body>

</html>